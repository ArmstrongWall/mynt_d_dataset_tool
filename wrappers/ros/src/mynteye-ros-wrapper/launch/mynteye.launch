<launch>
  <!-- Stream mode -->
  <arg name="stream_1280x720"   default="0" />
  <arg name="stream_2560x720"   default="1" />
  <arg name="stream_1280x480"   default="2" />
  <arg name="stream_640x480"    default="3" />

  <!-- Stream format -->
  <arg name="stream_mjpg"       default="0" />
  <arg name="stream_yuyv"       default="1" />

  <!-- Depth mode -->
  <arg name="depth_raw"         default="0" />
  <arg name="depth_gray"        default="1" />
  <arg name="depth_colorful"    default="2" />

  <!-- Camera Params -->

  <!-- Device index -->
  <arg name="dev_index" default="0" />
  <!-- Framerate -->
  <arg name="framerate" default="10" />

  <arg name="depth_mode" default="$(arg depth_raw)" />
  <arg name="stream_mode" default="$(arg stream_1280x720)" />
  <arg name="color_stream_format" default="$(arg stream_yuyv)" />
  <arg name="depth_stream_format" default="$(arg stream_yuyv)" />

  <!-- Auto-exposure -->
  <arg name="state_ae" default="true" />
  <!-- Auto-white balance -->
  <arg name="state_awb" default="true" />
  <!-- IR intensity -->
  <arg name="ir_intensity" default="4" />

  <!-- Camera Intrinsics for generating points -->
  <arg name="cx" default="0" />
  <arg name="cy" default="0" />
  <arg name="fx" default="0" />
  <arg name="fy" default="0" />

  <!-- Generating points frequency, make slower than framerate -->
  <arg name="points_frequency" default="2" />

  <arg name="gravity" default="9.8" />

  <!-- Node params -->

  <arg name="mynteye"       default="mynteye" />
  <arg name="base_frame"    default="$(arg mynteye)_link_frame" />
  <arg name="color_frame"   default="$(arg mynteye)_color_frame" />
  <arg name="depth_frame"   default="$(arg mynteye)_depth_frame" />
  <arg name="points_frame"  default="$(arg mynteye)_points_frame" />
  <arg name="imu_frame"     default="$(arg mynteye)_imu_frame" />
  <arg name="temp_frame"    default="$(arg mynteye)_temp_frame" />

  <arg name="color_topic"   default="$(arg mynteye)/color" />
  <arg name="depth_topic"   default="$(arg mynteye)/depth" />
  <arg name="points_topic"  default="$(arg mynteye)/points" />
  <arg name="imu_topic"     default="$(arg mynteye)/imu" />
  <arg name="temp_topic"    default="$(arg mynteye)/temp" />

  <node name="mynteye_wrapper_node" pkg="mynteye_wrapper" type="mynteye_wrapper_node" output="screen">

    <!-- Camera params -->
    <param name="dev_index"     value="$(arg dev_index)" />
    <param name="framerate"     value="$(arg framerate)" />
    <param name="depth_mode"    value="$(arg depth_mode)" />
    <param name="stream_mode"   value="$(arg stream_mode)" />
    <param name="color_stream_format" value="$(arg color_stream_format)" />
    <param name="depth_stream_format" value="$(arg depth_stream_format)" />
    <param name="state_ae"      value="$(arg state_ae)" />
    <param name="state_awb"     value="$(arg state_awb)" />
    <param name="ir_intensity"  value="$(arg ir_intensity)" />

    <param name="cx" value="$(arg cx)" />
    <param name="cy" value="$(arg cy)" />
    <param name="fx" value="$(arg fx)" />
    <param name="fy" value="$(arg fy)" />

    <param name="points_frequency" value="$(arg points_frequency)" />

    <param name="gravity" value="$(arg gravity)" />

    <!-- Frame ids -->
    <param name="base_frame"   value="$(arg base_frame)" />
    <param name="color_frame"  value="$(arg color_frame)" />
    <param name="depth_frame"  value="$(arg depth_frame)" />
    <param name="points_frame" value="$(arg points_frame)" />
    <param name="imu_frame"    value="$(arg imu_frame)" />
    <param name="temp_frame"   value="$(arg temp_frame)" />

    <!-- Topic names -->
    <param name="color_topic"  value="$(arg color_topic)" />
    <param name="depth_topic"  value="$(arg depth_topic)" />
    <param name="points_topic" value="$(arg points_topic)" />
    <param name="imu_topic"    value="$(arg imu_topic)" />
    <param name="temp_topic"   value="$(arg temp_topic)" />
  </node>

  <arg name="pi/2" value="1.5707963267948966" />
  <arg name="optical_rotate" value="0 0 0 -$(arg pi/2) 0 -$(arg pi/2)" />

  <node pkg="tf" type="static_transform_publisher" name="link1_broadcaster"
      args="$(arg optical_rotate) $(arg base_frame) $(arg color_frame) 100" />
  <node pkg="tf" type="static_transform_publisher" name="link2_broadcaster"
      args="$(arg optical_rotate) $(arg base_frame) $(arg depth_frame) 100" />
  <node pkg="tf" type="static_transform_publisher" name="link3_broadcaster"
      args="$(arg optical_rotate) $(arg base_frame) $(arg points_frame) 100" />

  <node pkg="tf" type="static_transform_publisher" name="link4_broadcaster"
      args="0 0 0 0 0 0 $(arg color_frame) $(arg imu_frame) 100" />
  <node pkg="tf" type="static_transform_publisher" name="link5_broadcaster"
      args="0 0 0 0 0 0 $(arg color_frame) $(arg temp_frame) 100" />

</launch>
